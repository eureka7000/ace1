<div class="container profile">

    <div class="row">

        <%= render :partial=>"left_sidebar"%>

        <div class="col-md-9 margin-top-20">
        
            <div class="profile-body margin-bottom-20">
                
                <div class="tab-v1">
                    
                    <ul class="nav nav-justified nav-tabs">
                    <li class="active"><a data-toggle="tab" href="#passwordTab">학습진도</a></li>
                    </ul>
                    
                    <div class="tab-content">
                        
                        <hr class="devider devider-dotted" style="margin:10px">
                        
                        <div class="profile-edit tab-pane fade in active">
                            
                            <% unless notice.blank? %>
                                <p class="alert alert-warning"><%= notice %></p>
                            <% end %>
                            
                            <% unless alert.blank? %>
                                <p class="alert alert-danger"><%= alert %></p>
                            <% end %>
                            
                            <h3 class="heading-md"><i class="icon-custom icon-sm rounded-x icon-color-u fa fa-header"></i><%= @student.user_name %>학생의 학습진도</h3>
                            
                            <div class="table-search-v1 margin-bottom-20">

                                <div class="table-responsive">
                                    
                                    <table class="table table-bordered table-striped" style="clear: both">
                                    <thead>
                                    <tr>
                                    <th>Concept</th>
                                    <th>Unit Concept</th>
                                    <th>Progress</th>
                                    <th>Concept Start</th>
                                    <th>Concept Finish</th>
                                    <th>Concept Explanation Start</th>
                                    <th>Concept Explanation Finish</th>
                                    <th>Exercise Start</th>
                                    <th>Exercise Finish</th>
                                    <th>Video</th>
                                    <th>Self Evaluation</th>
                                    </tr>
                                    </thead>                        

                                    <tbody>
                                    <% if @study_histories.count == 0 %>
                                    <tr>
                                    <td colspan="11" class="text-center">학습이력이 없습니다.</td>
                                    </tr>
                                    <% end %>    
                            
                                    <%
                                        @study_histories.each do | study_history | 
                                
                                            progress = 0.00
                                
                                            if study_history.concept_start > 0
                                                progress = progress + 1
                                            end
                                
                                            if study_history.concept_finish > 0
                                                progress = progress + 1
                                            end
                                
                                            if study_history.concept_explanation_start > 0
                                                progress = progress + 1
                                            end
                                
                                            if study_history.concept_explanation_finish > 0
                                                progress = progress + 1
                                            end
                                
                                            if study_history.exercise_start > 0
                                                progress = progress + 1
                                            end
                                
                                            if study_history.exercise_finish > 0
                                                progress = progress + 1
                                            end
                                
                                            if study_history.video > 0
                                                progress = progress + 1
                                            end  
                                
                                            if study_history.self_evaluation > 0
                                                progress = progress + 1
                                            end      
                                
                                            progress_percent = progress/8 * 100
                                
                                            if progress_percent < 40  
                                                @bar_color = 'danger'                                    
                                            elsif progress_percent < 60 && progress_percent >= 40
                                                @bar_color = 'warning'                                    
                                            elsif progress_percent < 80 && progress_percent >= 60
                                                @bar_color = 'info'
                                            else
                                                @bar_color = 'success'                                        
                                            end    
                                
                                    %>
                                    <tr>
                                    <td><%= study_history.concept_name %></td>
                                    <td><%= study_history.unit_concept_name %></td>
                                    <td>
                                        <div class="progress">
                                            <div class="progress-bar progress-bar-<%= @bar_color %>" role="progressbar" aria-valuenow="<%= progress_percent %>" aria-valuemin="0" aria-valuemax="100" style="width: <%= progress_percent %>%">
                                                <%#= progress_percent %>
                                            </div>
                                        </div>
                                    </td>
                                    <td class="text-center"><% if study_history.concept_start > 0 %><i class="fa fa-check color-green"></i><% end %></td>
                                    <td class="text-center"><% if study_history.concept_finish > 0 %><i class="fa fa-check color-green"></i><% end %></td>
                                    <td class="text-center"><% if study_history.concept_explanation_start > 0 %><i class="fa fa-check color-green"></i><% end %></td>
                                    <td class="text-center"><% if study_history.concept_explanation_finish > 0 %><i class="fa fa-check color-green"></i><% end %></td>
                                    <td class="text-center"><% if study_history.exercise_start > 0 %><i class="fa fa-check color-green"></i><% end %></td>
                                    <td class="text-center"><% if study_history.exercise_finish > 0 %><i class="fa fa-check color-green"></i><% end %></td>
                                    <td class="text-center"><% if study_history.video > 0 %><i class="fa fa-check color-green"></i><% end %></td>
                                    <td class="text-center"><% if study_history.self_evaluation > 0 %><i class="fa fa-check color-green"></i><% end %></td>
                                    </tr>
                                    <% end %>
                                    </tbody>
                                    </table>
                                    
                                </div>

                            </div>
                            
                        </div>    
                        
                        <%= link_to 'Back', "/mypages/study_progress_check", :class => 'btn btn-default', :style => 'margin-top: 10px'  %>
                        
                    </div>
                    
                </div>
                
            </div>
            
        </div>
        
    </div>
    
</div>                

<script type="text/javascript">

function initpage() {}
    
</script>