<div class="row" style="margin: 20px;">

  <div class="col-md-12">

    <!-- tabs right -->
    <div class="tabbable">
      <ul class="nav nav-pills nav-stacked col-sm-1 col-sm-push-11" id="nav-pills">
        <li class="active"><a href="#d" data-toggle="tab" style="text-align: center">개 념</a></li>
        <li><a href="#e" data-toggle="tab" style="text-align: center">개념 설명</a></li>
        <li><a href="#f" data-toggle="tab" style="text-align: center">Exercise</a></li>
        <li><a href="#g" data-toggle="modal" data-target="#g" style="text-align: center">관련 개념</a></li>
        <li><a href="#s" data-toggle="modal" data-target="#s" style="text-align: center">Self Evaluation</a></li>
        <li><a href="#v" data-toggle="tab" style="text-align: center">Video</a></li>
        <li><a href="#m" data-toggle="tab" style="text-align: center">질문하기</a></li>
        <li><a href="#p" data-toggle="tab" style="text-align: center">프린트</a></li>


      </ul>
      <div class="tab-content col-sm-11 col-sm-pull-1">

        <!-- Tab 개념 -->
        <div class="tab-pane active" id="d">

          <div class="col-md-6">

            <p>
              <% unless @unit_concept.level.nil? %>
                  <% rst = 5 - @unit_concept.level %>
                  <span style="color:red">
                    <% (1..@unit_concept.level).each do |idx| %>
                    *
                    <% end%>
                    </span>
                    <span style="color:gray">
                    <% (1..rst).each do |idx| %>
                    *
                    <% end %>
                    </span>
              <% end %>
            </p>
            <h3><span style="color:red"><%= @unit_concept.code.upcase %></span> <%= @unit_concept.name %></h3>

            <div style="overflow-y: auto; width: 100%; height: 580px">
              <% imgCount = 1 %>
              <% @unit_concept_descs.each do | unit_concept_desc | %>
                  <% unless unit_concept_desc.desc_type.to_i != 1 %>
                      <% if imgCount == 1 %>
                          <img src="https://s3.ap-northeast-2.amazonaws.com/eurekamath/uploads/unit_concept_desc/<%= unit_concept_desc.id %>/<%= unit_concept_desc.memo %>.png" style="width:100%; margin-top: 10px;"/>
                      <% else %>
                          <img id="ucd1<%= imgCount %>" hidden src="https://s3.ap-northeast-2.amazonaws.com/eurekamath/uploads/unit_concept_desc/<%= unit_concept_desc.id %>/<%= unit_concept_desc.memo %>.png" style="width:100%; margin-top: 10px;"/>
                      <% end %>
                      <% imgCount += 1 %>
                  <% end %>
              <% end %>
              <% if imgCount == 1 %>
                 <div class="col-md-9">
                 </div>
                 <div class="col-md-3">
                    <ul hidden class="list-inline badge-lists margin-bottom-30 margin-top-20">
                        <li>
                          <button id="btn1" class="btn rounded btn-success" type="button" >다음</button>
                          <span id="badge1" class="badge badge-red rounded-2x" ><%= imgCount-2 %></span>
                        </li>
                    </ul>
               </div>
              <% else %>
                  <div class="col-md-9">
                  </div>
                  <div class="col-md-3">
                    <ul class="list-inline badge-lists margin-bottom-30 margin-top-20">
                      <li>
                        <button id="btn1" class="btn rounded btn-success" type="button" >다음</button>
                        <span id="badge1" class="badge badge-red rounded-2x" ><%= imgCount-2 %></span>
                      </li>
                    </ul>
                  </div>
              <% end %>

            </div>
          </div>
        </div> <!-- Tab 개념 END-->

        <!-- Tab 개념 설명 -->
        <div class="tab-pane" id="e">
          <div class="col-md-6">

            <p>
              <% unless @unit_concept.level.nil? %>
                  <% rst = 5 - @unit_concept.level %>
                  <span style="color:red">
                                <% (1..@unit_concept.level).each do |idx| %>
                                *
                                <% end%>
                                </span>
                                <span style="color:gray">
                                <% (1..rst).each do |idx| %>
                                *
                                <% end %>
                                </span>
              <% end %>
            </p>
            <h3><span style="color:red"><%= @unit_concept.code.upcase %></span> <%= @unit_concept.name %></h3>

            <div style="overflow-y: auto; width: 100%; height: 580px">
              <% @unit_concept_descs.each do | unit_concept_desc | %>
                  <% unless unit_concept_desc.desc_type.to_i != 1%>
                      <img src="https://s3.ap-northeast-2.amazonaws.com/eurekamath/uploads/unit_concept_desc/<%= unit_concept_desc.id %>/<%= unit_concept_desc.memo %>.png" style="width:100%; margin-top: 10px;"/>
                  <% end %>
              <% end %>
            </div>
          </div>

          <div class="col-md-6">
            <div style="overflow-y: auto; width: 100%; height: 580px">
              <% imgCount = 1 %>
              <% @unit_concept_descs.each do | unit_concept_decs | %>
                  <% unless unit_concept_decs.desc_type.to_i != 2 %>
                      <% if imgCount == 1 %>
                          <img src="https://s3.ap-northeast-2.amazonaws.com/eurekamath/uploads/unit_concept_desc/<%= unit_concept_decs.id %>/<%= unit_concept_decs.memo %>.png" style="width:100%; margin-top: 10px;"/>
                      <% else %>
                          <img id="ucd2<%= imgCount %>" hidden src="https://s3.ap-northeast-2.amazonaws.com/eurekamath/uploads/unit_concept_desc/<%= unit_concept_decs.id %>/<%= unit_concept_decs.memo %>.png" style="width:100%; margin-top: 10px;"/>
                      <% end %>
                      <% imgCount += 1 %>
                  <% end %>
              <% end %>
              <% if imgCount == 1 %>
                  <div class="col-md-9">
                  </div>
                  <div class="col-md-3">
                    <ul hidden class="list-inline badge-lists margin-bottom-30 margin-top-20">
                      <li>
                        <button id="btn2" class="btn rounded btn-success" type="button" >다음</button>
                        <span id="badge2" class="badge badge-red rounded-2x" ><%= imgCount-2 %></span>
                      </li>
                    </ul>
                  </div>
              <% else %>
                  <div class="col-md-9">
                  </div>
                  <div class="col-md-3">
                    <ul class="list-inline badge-lists margin-bottom-30 margin-top-20">
                      <li>
                        <button id="btn2" class="btn rounded btn-success" type="button" >다음</button>
                        <span id="badge2" class="badge badge-red rounded-2x" ><%= imgCount-2 %></span>
                      </li>
                    </ul>
                  </div>
              <% end %>
            </div>
          </div>
        </div> <!-- Tab 개념 설명 END -->


        <!-- Tab Exercise -->
        <div class="tab-pane" id="f">
          <div class="col-md-12">

            <p>
              <% unless @unit_concept.level.nil? %>
                  <% rst = 5 - @unit_concept.level %>
                  <span style="color:red">
                                <% (1..@unit_concept.level).each do |idx| %>
                                *
                                <% end%>
                                </span>
                                <span style="color:gray">
                                <% (1..rst).each do |idx| %>
                                *
                                <% end %>
                                </span>
              <% end %>
            </p>
            <h3><span style="color:red"><%= @unit_concept.code.upcase %></span> <%= @unit_concept.name %></h3>

            <div style="overflow-y: auto; width: 100%; height: 580px">
              <% imgCount = 1 %>
              <% @unit_concept_descs.each do | unit_concept_desc | %>
                  <% unless unit_concept_desc.desc_type.to_i != 3 %>
                      <% if imgCount == 1 %>
                          <div class="col-md-12" id="exercise1<%=imgCount%>">
                            <div class="col-md-6">
                              <img src="https://s3.ap-northeast-2.amazonaws.com/eurekamath/uploads/unit_concept_desc/<%= unit_concept_desc.id %>/<%= unit_concept_desc.memo %>.png" style="width:100%; margin-top: 10px;"/>
                            </div>
                            <div class="col-md-6 text-center">
                              <form role="form" style="padding-top: 3%">
                                <label class="radio-inline">
                                  <input type="radio" name="exe<%=unit_concept_desc.memo%>" value="correct">맞음
                                </label>
                                &nbsp; &nbsp;
                                <label class="radio-inline">
                                  <input type="radio" name="exe<%=unit_concept_desc.memo%>" value="wrong">틀림
                                </label>
                                &nbsp; &nbsp; &nbsp; &nbsp;
                                <button class="btn rounded btn-info" type="button">저장</button>
                              </form>
                            </div>

                          </div>
                      <% else %>
                          <div hidden class="col-md-12" id="exercise1<%=imgCount%>">
                            <div class="col-md-6">
                              <img src="https://s3.ap-northeast-2.amazonaws.com/eurekamath/uploads/unit_concept_desc/<%= unit_concept_desc.id %>/<%= unit_concept_desc.memo %>.png" style="width:100%; margin-top: 10px;"/>
                            </div>
                            <div class="col-md-6 text-center">
                              <form role="form" style="padding-top: 3%">
                                <label class="radio-inline">
                                  <input type="radio" name="exe<%=unit_concept_desc.memo%>" value="correct">맞음
                                </label>
                                &nbsp; &nbsp;
                                <label class="radio-inline">
                                  <input type="radio" name="exe<%=unit_concept_desc.memo%>" value="wrong">틀림
                                </label>
                                &nbsp; &nbsp; &nbsp; &nbsp;
                                <button class="btn rounded btn-info" type="button">저장</button>
                              </form>
                            </div>

                          </div>
                      <% end %>
                      <% imgCount += 1 %>
                  <% end %>
              <% end %>
              <% if imgCount == 1 %>
                  <div class="col-md-11 text-right">
                    <ul hidden class="list-inline badge-lists margin-bottom-30 margin-top-20">
                      <li>
                        <button id="btn3" class="btn rounded btn-success" type="button" >다음</button>
                        <span id="badge3" class="badge badge-red rounded-2x" ><%= imgCount-2 %></span>
                      </li>
                    </ul>
                  </div>
                  <div class="col-md-1 t text-right">

                  </div>
              <% else %>
                  <div class="col-md-11 text-right">
                    <ul class="list-inline badge-lists margin-bottom-30 margin-top-20">
                      <li>
                        <button id="btn3" class="btn rounded btn-success" type="button" >다음</button>
                        <span id="badge3" class="badge badge-red rounded-2x" ><%= imgCount-2 %></span>
                      </li>
                    </ul>
                  </div>
                  <div class="col-md-1">
                  </div>
              <% end %>
            </div>
          </div>


        </div> <!-- Tab Exercise END -->

        <!-- Tab Video -->
        <div class="tab-pane" id="v">
          <div class="col-md-12">
            <p>
              <% unless @unit_concept.level.nil? %>
                  <% rst = 5 - @unit_concept.level %>
                  <span style="color:red">
                      <% (1..@unit_concept.level).each do |idx| %>
                      *
                      <% end%>
                      </span>
                      <span style="color:gray">
                      <% (1..rst).each do |idx| %>
                      *
                      <% end %>
                  </span>
              <% end %>
            </p>
            <h3><span style="color:red"><%= @unit_concept.code.upcase %></span> <%= @unit_concept.name %></h3>

            <div style="overflow-y: auto; ">
              <% @unit_concept_descs.each do | unit_concept_desc | %>
                  <% unless unit_concept_desc.desc_type.to_i != 4%>
                      <div class="responsive-video margin-bottom-30">
                        <iframe src="https://player.vimeo.com/video/<%= unit_concept_desc.video %>" width="100%" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen ></iframe>
                        <p>eurekamathv1 from <a href="https://vimeo.com/user49478797">EurekaMath</a> on <a href="https://vimeo.com">Vimeo</a>.</p>
                      </div>
                  <% end %>
              <% end %>

            </div>

          </div>
        </div> <!-- Tab Video END -->

        <!-- Tab 프린트 -->
        <div class="tab-pane" id="p">
          <div id="printArea"> <!-- 프린트 영역 -->
              <div class="col-xs-6">
                <p>
                  <% unless @unit_concept.level.nil? %>
                      <% rst = 5 - @unit_concept.level %>
                      <span style="-webkit-text-fill-color: red; font-size: large">
                      <% (1..@unit_concept.level).each do |idx| %>
                      *
                      <% end%>
                      </span>
                      <span style="-webkit-text-fill-color: grey; font-size: large">
                      <% (1..rst).each do |idx| %>
                      *
                      <% end %>
                  </span>
                  <% end %>
                </p>
                <h4 style="margin-bottom: 10px"><span style="-webkit-text-fill-color: red"><%= @unit_concept.code.upcase %></span> <%= @unit_concept.name %></h4>
                <div style="overflow-y: auto; ">
                  <% @unit_concept_descs.each do | unit_concept_desc | %>
                      <% unless unit_concept_desc.desc_type.to_i != 1%>
                          <img src="https://s3.ap-northeast-2.amazonaws.com/eurekamath/uploads/unit_concept_desc/<%= unit_concept_desc.id %>/<%= unit_concept_desc.memo %>.png" style="width:100%; height:100%; margin-top: 10px;"/>
                          <%  %>
                      <% end %>
                  <% end %>
                  <br><br>
                  <span class="label rounded-2x label-aqua">관련 개념</span>
                  <br>

                  <% @links.each do | link | %>
                      <span class="item" style="-webkit-text-fill-color: #3eadff; display: inline;">
                         <i class="fa fa-circle"></i>
                        &nbsp;
                        <span style="-webkit-text-fill-color: #fc4674"><%= link.code %> </span>
                        <span style="-webkit-text-fill-color: #020202"> : <%= link.name %> </span>
                      </span>
                      <br>
                  <% end %>
                </div>
              </div>

              <div class="col-xs-6">
                <br><br>
                <span class="label rounded-2x label-aqua">개념보충설명</span>
                <br>

                <div style="overflow-y: auto; ">
                  <% @unit_concept_descs.each do | unit_concept_decs | %>
                      <% unless unit_concept_decs.desc_type.to_i != 2 %>
                          <img src="https://s3.ap-northeast-2.amazonaws.com/eurekamath/uploads/unit_concept_desc/<%= unit_concept_decs.id %>/<%= unit_concept_decs.memo %>.png" style="width:100%; height:100%; margin-top: 5px;"/>
                      <% end %>
                  <% end %>

                  <br><br>
                  <span class="label rounded-2x label-aqua margin-bottom-30">Exercise</span>

                  <% @unit_concept_descs.each do | unit_concept_decs | %>
                      <% unless unit_concept_decs.desc_type.to_i != 3 %>
                          <img src="https://s3.ap-northeast-2.amazonaws.com/eurekamath/uploads/unit_concept_desc/<%= unit_concept_decs.id %>/<%= unit_concept_decs.memo %>.png" style="width:100%; height:100%; margin-top: 5px;"/>
                      <% end %>
                  <% end %>
                </div>
              </div>
            </div> <!-- 프린트 영역 END-->
          <div class="col-md-12 text-right margin-top-20">
            <input type="button" id="printBtn" onclick="printing('printArea')" value="프린트하기" class="btn rounded btn-success"/>
          </div>
        </div> <!-- Tab 프린트 END -->

      </div>
    </div>
  </div>
  <!-- /tabs -->

    <!-- Tab Self Evaluation -->

      <!-- Modal -->
      <div class="modal fade" id="s" role="dialog">
        <div class="modal-dialog modal-lg">
          <div class="modal-content">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal">&times;</button>
              <div class="modal-title">
                <span class="label rounded-2x label-aqua">SELF EVALUATION</span>
              </div>
            </div>
            <div class="modal-body">

              <div class="row">
                <div class="col-lg-6">

                  <form role="form">
                    <label class="radio-inline">
                      <input type="radio" name="evaluation" value="easy">이해됨
                    </label>
                    <label class="radio-inline">
                      <input type="radio" name="evaluation" value="middle">보통
                    </label>
                    <label class="radio-inline">
                      <input type="radio" name="evaluation" value="difficult">어려움
                    </label>
                  </form>

                  <label>comment</label></br>

                  <textarea class="form-control" rows="3" placeholder="입력하세요"></textarea>

                </div><!-- /.col-lg-6 -->
              </div><!-- /.row -->

            </div>
            <div class="modal-footer">
              <button class="btn rounded btn-info" type="button">수정</button>
              <button data-dismiss="modal" class="btn rounded btn-success" type="button">확인</button>
            </div>
          </div>
        </div>
      </div>

    <!-- Tab Self Evaluation END-->

  </div>

<!-- Tab 관련 개념 -->

<!-- Modal -->
<div class="modal fade" id="g" role="dialog">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <div class="modal-title">
          <span class="label rounded-2x label-aqua">관련 개념</span>
        </div>
      </div>
      <div class="modal-body">

        <div class="row">
          <div class="col-lg-6">

            <% @links.each do | link | %>

                <div class="col-md-4 content-boxes-v6 md">
                  <a href="/contents/<%= link.id %>" target="_blank"><i class="rounded-x icon-link"></i></a>
                  <h1 class="title-v3-md text-uppercase margin-bottom-10"><p> <%= link.name %></p></h1>
                </div>
            <% end %>

          </div><!-- /.col-lg-6 -->
        </div><!-- /.row -->

      </div>
      <div class="modal-footer">
        <button data-dismiss="modal" class="btn rounded btn-success" type="button" >확인</button>
      </div>
    </div>
  </div>
</div>

<!-- Tab 관련 개념 END-->

</div>

</div>
<!-- /row -->

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.2/jquery.min.js"></script>

<script type="text/javascript">
  $(document).ready(function(){
    var index = 2;

    $("#btn1").click(function(){
      $("#ucd1"+index).show();
      index++;

      var count = Number($("#badge1").text());
      if(count == -1){
        count = 0;
      }
      if (count > 0){
        $("#badge1").text(count-1);
      }
      if (count == 1){
        $("#btn1").hide();
        $("#badge1").hide();
      }
    });
  });
</script>


<script type="text/javascript">
  $(document).ready(function(){
    var index = 2;
    $("#btn2").click(function(){
      $("#ucd2"+index).show();
      index++;

      var count = Number($("#badge2").text());

      if (count > 0 ){
        $("#badge2").text(count-1);
      }
      if (count == 1){
        $("#btn2").hide();
        $("#badge2").hide();
      }
    });
  });
</script>

<script type="text/javascript">
  $(document).ready(function(){
    var index = 2;

    $("#btn3").click(function(){
      $("#exercise1"+index).show();
      index++;

      var count = Number($("#badge3").text());
      if(count == -1){
        count = 0;
      }
      if (count > 0){
        $("#badge3").text(count-1);
      }
      if (count == 1){
        $("#btn3").hide();
        $("#badge3").hide();
      }
    });
  });
</script>

<!-- Print method -->
<script type="text/javascript">
    function printing(printId) {
      var printElements = document.getElementById(printId).innerHTML;
      var allPage = document.body.innerHTML;

      document.body.innerHTML = printElements;
      $("#printBtn").hide();
      window.print();

      document.body.innerHTML = allPage;
      location.reload();
    }
</script>