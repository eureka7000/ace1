<!-- MathJAX -->
<script type="text/javascript" async
        src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML">
</script>

<script type="text/x-mathjax-config">
        MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}});
</script>

<div class="container container-fluid">
    <h1>Listing Discussions</h1>
    <% unless session[:admin]['admin_type'] != 'admin' %>
        <%= link_to '토론 주제 개설', '/discussion_templets/new_for_admin', :class => 'btn btn-windows rounded col-md-12 col-sm-12 col-xs-12 margin-bottom-20 margin-top-20' %>
    <% end %>

    <table class="table table-striped">
        <thead>
        <tr>
            <th class="text-center">개설자</th>
            <th class="text-center">주제</th>
            <th class="text-center">핵심개념</th>
            <th class="text-center">개념 Level</th>
            <th class="text-center">대상학년</th>
            <th class="text-center">Level</th>
            <th colspan="3" class="text-center"><i class="fa fa-cog"></i></th>
        </tr>
        </thead>
        <tbody>
        <% @discussion_templets.each do |discussion_templet| %>
            <tr>
                <td class="text-center"><%= discussion_templet.creator_type == 'admin' ? Admin.find(discussion_templet.user_id).name : User.find(discussion_templet.user_id).user_name %></td>
                <td><%= discussion_templet.title unless discussion_templet.title.nil? %></td>
                <% unit_concept = UnitConcept.find(discussion_templet.unit_concept_id) unless discussion_templet.unit_concept_id.nil? %>
                <td class="text-center"><%= unit_concept.name unless discussion_templet.unit_concept_id.nil? %></td>
                <td class="text-center"><%= unit_concept.level %></td>
                <td class="text-center"><%= discussion_templet.grade unless discussion_templet.grade.nil? %></td>
                <td class="text-center"><%= discussion_templet.level unless discussion_templet.level.nil? %></td>
                <td class="text-center"><%= link_to 'Show', discussion_templet, class: 'btn btn-windows rounded btn-xs' %></td>
                <% unless @admin_type != 'admin' %>
                    <td class="text-center"><%= link_to 'Edit', edit_discussion_path(discussion_templet), class: 'btn btn-podcast rounded btn-xs' %></td>
                    <td class="text-center"><%= link_to 'Destroy', discussion_templet, method: :delete, data: { confirm: 'Are you sure?' }, class: 'btn btn-youtube rounded btn-xs' %></td>
                <% end %>
            </tr>
        <% end %>
        </tbody>
    </table>
</div>